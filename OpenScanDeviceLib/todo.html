<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OpenScanDeviceLib: Todo List</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OpenScanDeviceLib
   </div>
   <div id="projectbrief">OpenScan Device Programming Interface</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Todo List </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><dl class="reflist">
<dt>Global <a class="el" href="group__dpi.html#ga33b2866891a75733e0044f91c2796e14">OScDev_Acquisition_GetClockSource</a>  (OScDev_Acquisition *acq, OScDev_ClockSource *clock)</dt>
<dd><a class="anchor" id="_todo000001"></a>This is redundant with <a class="el" href="group__dpi.html#gae1bfbb2ac399b32557e27f0c3bd94bc3" title="Determine whether this device should provide the clock for the given acquisition.">OScDev_Acquisition_IsClockRequested()</a>. Remove.  </dd>
<dt>Global <a class="el" href="struct_o_sc_dev___device_impl.html#a388ac2c5408480d096a15386df36be24">OScDev_DeviceImpl::Arm</a>  )(OScDev_Device *device, OScDev_Acquisition *acq)</dt>
<dd><a class="anchor" id="_todo000004"></a>Currently, state change after the device is armed is handled in a variable way depending on what triggers the state change (especially stop of acquisition). We should replace this with a simpler interface where the device calls new functions <code>OScDev_Acquisition_NotifyStart()</code> and <code>OScDev_Acquisition_NotifyStop()</code>. The start notification will be purely informational, used e.g. so that the GUI can show "waiting for
start trigger" vs "acquisition running". The stop trigger will indicate that all action has finished and the device is ready to be disarmed. (<code>Disarm()</code> should be a mandatory function distinct from <code><a class="el" href="struct_o_sc_dev___device_impl.html#afe6cfb187f14abbf97b38c88da1fa6a3" title="Stop the current acquisition and disarm.">Stop()</a></code>, which should behave as a software trigger for cancellation.) There should also be a way for a device to declare that it is not capable of issuing a start notification (in which case arrival of data can be used as a proxy for display purposes). <code><a class="el" href="struct_o_sc_dev___device_impl.html#afe6cfb187f14abbf97b38c88da1fa6a3" title="Stop the current acquisition and disarm.">Stop()</a></code>, unlike <code>Disarm()</code>, need not be called when OpenScanLib has already received a stop notification.  </dd>
<dt>Global <a class="el" href="struct_o_sc_dev___device_impl.html#a97f1571686a588291bd8fb391fdfe92b">OScDev_DeviceImpl::EnumerateInstances</a>  )(OScDev_PtrArray **devices)</dt>
<dd><a class="anchor" id="_todo000002"></a>Provide an alternative mechanism to instantiate devices that cannot be enumerated. Rather than imitating Micro-Manager's leaky "pre-init property" mechanism, we should use dedicated "device loader" objects, which can have settings such as port numbers. </dd>
<dt>Global <a class="el" href="struct_o_sc_dev___device_impl.html#a46a2440cf2cf47ec5e5ec7f7f47d27b0">OScDev_DeviceImpl::GetActualPixelRate</a>  )(OScDev_Device *device, double nominalRateHz, double *actualRateHz)</dt>
<dd><a class="anchor" id="_todo000003"></a>It is not clear if this is the best method of matching pixel rates. At the very least, this does allow OpenScanLib to quantify the error, so that the user might establish a discrete set of usable rates. That's probably better than any sort of poorly thought-through automagical matching.  </dd>
<dt>Global <a class="el" href="struct_o_sc_dev___device_impl.html#a8e8a81257a087cea2f8264fd6bb1157d">OScDev_DeviceImpl::IsRunning</a>  )(OScDev_Device *device, bool *isRunning)</dt>
<dd><a class="anchor" id="_todo000007"></a>This function should be replaced with a callback-based interface to avoid polling and simplify device module implementation.  </dd>
<dt>Global <a class="el" href="struct_o_sc_dev___device_impl.html#a02d932c94a83f764073170870f680537">OScDev_DeviceImpl::Start</a>  )(OScDev_Device *device)</dt>
<dd><a class="anchor" id="_todo000005"></a>Better to rename to <code>SoftwareTriggerStart()</code>?  </dd>
<dt>Global <a class="el" href="struct_o_sc_dev___device_impl.html#afe6cfb187f14abbf97b38c88da1fa6a3">OScDev_DeviceImpl::Stop</a>  )(OScDev_Device *device)</dt>
<dd><p class="startdd"><a class="anchor" id="_todo000006"></a>This function should be split into two separate functions, <code>SoftwareTriggerStop()</code> and <code>Disarm()</code>, with very different roles. The former should merely be an asynchronous signal that the device should ignore any subsequent start triggers and stop as soon as possible. Actual completion of stopping should be notified via a callback (see Todo at Arm). The latter (<code>Disarm()</code>) should mainly handle cleanup, and should be guaranteed to be called exactly once per armed acquisition, after all processes have stopped. </p>
<p class="enddd"><code>SoftwareTriggerStop()</code> can be optional to implement; we should additionally provide <code>bool OScDev_Acquisition_SoftwareStopTriggered()</code> which can be called any time between <code><a class="el" href="struct_o_sc_dev___device_impl.html#a388ac2c5408480d096a15386df36be24" title="Prepare the clock, scanner, and/or detector for an acquisition.">Arm()</a></code> and <code>Disarm()</code>; this will supersede the <code>bool</code> return value of <code>OScDev_Acquisition_CallFrameCalback()</code>.  </p>
</dd>
<dt>Global <a class="el" href="struct_o_sc_dev___device_impl.html#afb81428b51bd9a2057c51581561aa970">OScDev_DeviceImpl::Wait</a>  )(OScDev_Device *device)</dt>
<dd><a class="anchor" id="_todo000008"></a>This function should be removed, because it leads to reinvention of condition variable code in each device module. Better to report state changes using a callback interface.  </dd>
<dt>Global <a class="el" href="struct_o_sc_dev___setting_impl.html#abf5411e12b669745c4dfda29a73f6383">OScDev_SettingImpl::GetNumericConstraintType</a>  )(OScDev_Setting *setting, OScDev_ValueConstraint *constraintType)</dt>
<dd><a class="anchor" id="_todo000009"></a>We cannot realistically allow the constraint type to change, so this should be a static data field. </dd>
</dl>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
</body>
</html>
